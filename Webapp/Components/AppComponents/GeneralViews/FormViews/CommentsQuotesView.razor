@using System.Timers
@using SetiFileStore.FileClient
@using Webapp.Data

<RadzenCard class="step-card">
        <RadzenStack>
            <RadzenCard class="area-header">
                @if(this.Mode!=EditMode.VIEW){
                    <RadzenText TextStyle="TextStyle.H6" TextAlign="TextAlign.Center">
                        <RadzenIcon Icon="request_quote"/><b>Comments and Quotes</b>
                    </RadzenText>
                    <RadzenText Text="Enter any additional comments and upload quotes"
                                TextAlign="TextAlign.Center"
                                TextStyle="TextStyle.Subtitle1"/>
                } else {
                    <RadzenText TextStyle="TextStyle.H6" TextAlign="TextAlign.Center">
                        <RadzenIcon Icon="request_quote"/><b>Comments and Quotes</b>
                    </RadzenText>
                }
            </RadzenCard>
            <RadzenStack Orientation="Orientation.Vertical">
                <RadzenTabs>
                    <Tabs>
                        <RadzenTabsItem Text="Additional Comments">
                            <RadzenTextArea Placeholder="Additional message appended to the request"
                                            Value="@this.AdditionalComments"
                                            ValueChanged="@this.AdditionalCommentsChanged"
                                            Style="width: 100%; height:100px;"/>
                        </RadzenTabsItem>
                        <RadzenTabsItem Text="Upload Quotes">
                            <QuotesControl Quotes="@this.Quotes" Mode="@this.Mode"
                                           CurrentQuoteIdsChanged="@this.CurrentQuoteIdsChanged"
                                           QuotesChanged="@this.QuotesChanged"
                                           CurrentQuoteIds="@CurrentQuoteIds"/>
                        </RadzenTabsItem>
                    </Tabs>
                </RadzenTabs>
            </RadzenStack>
        </RadzenStack>
</RadzenCard>



@code {
    [Inject] public NotificationService _notifyService { get; set; }
    [Parameter] public List<FileData> Quotes { get; set; } = [];
    [Parameter] public List<string> CurrentQuoteIds { get; set; }
    [Parameter] public EventCallback<List<string>> CurrentQuoteIdsChanged { get; set; }
    [Parameter] public EditMode Mode { get; set; }
    [Parameter] public string? AdditionalComments { get; set; }
    [Parameter] public EventCallback<string?> AdditionalCommentsChanged { get; set; }
    [Parameter] public EventCallback<List<FileData>> QuotesChanged { get; set; }
    

}