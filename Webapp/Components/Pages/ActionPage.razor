@page "/action/{Id}/{Action:int}"
@using Domain.Authentication

<PageTitle>Home</PageTitle>

<AuthorizeView Roles="@this.GetRoles()">
    <Authorized>
        <MainView Id="@Id" Action="@Action"/>
    </Authorized>
    <NotAuthorized>
        <RadzenText Text="You are not authorized to view this page" TextStyle="TextStyle.H4"/>
    </NotAuthorized>
</AuthorizeView>

@code {
    [Parameter] public string Id { get; set; } = "";
    [Parameter] public int Action { get; set; } = 0;
    
    [CascadingParameter]
    private Task<AuthenticationState> authenticationState { get; set; }

    private string GetRoles() {
        return $"{PurchaseRequestRole.Purchaser.Name}," +
               $"{PurchaseRequestRole.Approver.Name}," +
               $"{PurchaseRequestRole.Requester.Name}," +
               $"{PurchaseRequestRole.Admin.Name}";
    }
}