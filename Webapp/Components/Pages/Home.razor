@page "/"
@using Domain.Authentication
@using Webapp.Components.AppComponents.RequestViews
@inject IJSRuntime js
<PageTitle>Home</PageTitle>

<AuthorizeView Roles="@this.GetRoles()">
    <Authorized>
        <MainView/>
    </Authorized>
    <NotAuthorized>
        <RadzenText Text="You are not authorized to view this page" TextStyle="TextStyle.H4"/>
    </NotAuthorized>
</AuthorizeView>

@*<AuthorizeView Roles="Requester">
    <RequesterView/>
</AuthorizeView>

<AuthorizeView Roles="Admin">
    <RadzenText Text="This is a Admin View" TextStyle="TextStyle.H1"/>
</AuthorizeView>

<AuthorizeView Roles="Approver">
    <ApproverView/>
</AuthorizeView>

<AuthorizeView Roles="Purchaser">

</AuthorizeView>*@


@code {
    [CascadingParameter]
    private Task<AuthenticationState> authenticationState { get; set; }

    private string GetRoles() {
        return $"{PurchaseRequestRole.Purchaser.Name}," +
               $"{PurchaseRequestRole.Approver.Name}," +
               $"{PurchaseRequestRole.Requester.Name}," +
               $"{PurchaseRequestRole.Admin.Name}";
    }
}
